<?xml version="1.0"?>
<config version="10.2.0" urldb="paloaltonetworks" detail-version="10.2.9">
  <mgt-config>
    <users>
      <entry name="panadmin">
        <phash>*</phash>
        <permissions>
          <role-based>
            <superuser>yes</superuser>
          </role-based>
        </permissions>
      </entry>
    </users>
    <password-complexity>
      <enabled>yes</enabled>
      <minimum-length>8</minimum-length>
    </password-complexity>
  </mgt-config>
  <shared>
    <application/>
    <application-group/>
    <service/>
    <service-group/>
    <botnet>
      <configuration>
        <http>
          <dynamic-dns>
            <enabled>yes</enabled>
            <threshold>5</threshold>
          </dynamic-dns>
          <malware-sites>
            <enabled>yes</enabled>
            <threshold>5</threshold>
          </malware-sites>
          <recent-domains>
            <enabled>yes</enabled>
            <threshold>5</threshold>
          </recent-domains>
          <ip-domains>
            <enabled>yes</enabled>
            <threshold>10</threshold>
          </ip-domains>
          <executables-from-unknown-sites>
            <enabled>yes</enabled>
            <threshold>5</threshold>
          </executables-from-unknown-sites>
        </http>
        <other-applications>
          <irc>yes</irc>
        </other-applications>
        <unknown-applications>
          <unknown-tcp>
            <destinations-per-hour>10</destinations-per-hour>
            <sessions-per-hour>10</sessions-per-hour>
            <session-length>
              <maximum-bytes>100</maximum-bytes>
              <minimum-bytes>50</minimum-bytes>
            </session-length>
          </unknown-tcp>
          <unknown-udp>
            <destinations-per-hour>10</destinations-per-hour>
            <sessions-per-hour>10</sessions-per-hour>
            <session-length>
              <maximum-bytes>100</maximum-bytes>
              <minimum-bytes>50</minimum-bytes>
            </session-length>
          </unknown-udp>
        </unknown-applications>
      </configuration>
      <report>
        <topn>100</topn>
        <scheduled>yes</scheduled>
      </report>
    </botnet>
  </shared>
  <devices>
    <entry name="localhost.localdomain">
      <network>
        <interface>
          <ethernet>
            <entry name="ethernet1/1">
              <layer3>
                <ndp-proxy>
                  <enabled>no</enabled>
                </ndp-proxy>
                <sdwan-link-settings>
                  <upstream-nat>
                    <enable>no</enable>
                    <static-ip/>
                  </upstream-nat>
                  <enable>no</enable>
                </sdwan-link-settings>
                <dhcp-client>
                  <create-default-route>no</create-default-route>
                </dhcp-client>
                <lldp>
                  <enable>no</enable>
                </lldp>
                <interface-management-profile>lb_health_check</interface-management-profile>
              </layer3>
            </entry>
            <entry name="ethernet1/2">
              <layer3>
                <ndp-proxy>
                  <enabled>no</enabled>
                </ndp-proxy>
                <sdwan-link-settings>
                  <upstream-nat>
                    <enable>no</enable>
                    <static-ip/>
                  </upstream-nat>
                  <enable>no</enable>
                </sdwan-link-settings>
                <dhcp-client>
                  <create-default-route>no</create-default-route>
                </dhcp-client>
                <lldp>
                  <enable>no</enable>
                </lldp>
                <interface-management-profile>lb_health_check</interface-management-profile>
              </layer3>
            </entry>
          </ethernet>
        </interface>
        <profiles>
          <monitor-profile>
            <entry name="default">
              <interval>3</interval>
              <threshold>5</threshold>
              <action>wait-recover</action>
            </entry>
          </monitor-profile>
          <interface-management-profile>
            <entry name="lb_health_check">
              <permitted-ip>
                <entry name="168.63.129.16"/>
%{ for appgw_cidr in mgmt_profile_appgw_cidr ~}
                <entry name="${appgw_cidr}"/>
%{ endfor ~}
              </permitted-ip>
              <http>yes</http>
            </entry>
          </interface-management-profile>
        </profiles>
        <ike>
          <crypto-profiles>
            <ike-crypto-profiles>
              <entry name="default">
                <encryption>
                  <member>aes-128-cbc</member>
                  <member>3des</member>
                </encryption>
                <hash>
                  <member>sha1</member>
                </hash>
                <dh-group>
                  <member>group2</member>
                </dh-group>
                <lifetime>
                  <hours>8</hours>
                </lifetime>
              </entry>
              <entry name="Suite-B-GCM-128">
                <encryption>
                  <member>aes-128-cbc</member>
                </encryption>
                <hash>
                  <member>sha256</member>
                </hash>
                <dh-group>
                  <member>group19</member>
                </dh-group>
                <lifetime>
                  <hours>8</hours>
                </lifetime>
              </entry>
              <entry name="Suite-B-GCM-256">
                <encryption>
                  <member>aes-256-cbc</member>
                </encryption>
                <hash>
                  <member>sha384</member>
                </hash>
                <dh-group>
                  <member>group20</member>
                </dh-group>
                <lifetime>
                  <hours>8</hours>
                </lifetime>
              </entry>
            </ike-crypto-profiles>
            <ipsec-crypto-profiles>
              <entry name="default">
                <esp>
                  <encryption>
                    <member>aes-128-cbc</member>
                    <member>3des</member>
                  </encryption>
                  <authentication>
                    <member>sha1</member>
                  </authentication>
                </esp>
                <dh-group>group2</dh-group>
                <lifetime>
                  <hours>1</hours>
                </lifetime>
              </entry>
              <entry name="Suite-B-GCM-128">
                <esp>
                  <encryption>
                    <member>aes-128-gcm</member>
                  </encryption>
                  <authentication>
                    <member>none</member>
                  </authentication>
                </esp>
                <dh-group>group19</dh-group>
                <lifetime>
                  <hours>1</hours>
                </lifetime>
              </entry>
              <entry name="Suite-B-GCM-256">
                <esp>
                  <encryption>
                    <member>aes-256-gcm</member>
                  </encryption>
                  <authentication>
                    <member>none</member>
                  </authentication>
                </esp>
                <dh-group>group20</dh-group>
                <lifetime>
                  <hours>1</hours>
                </lifetime>
              </entry>
            </ipsec-crypto-profiles>
            <global-protect-app-crypto-profiles>
              <entry name="default">
                <encryption>
                  <member>aes-128-cbc</member>
                </encryption>
                <authentication>
                  <member>sha1</member>
                </authentication>
              </entry>
            </global-protect-app-crypto-profiles>
          </crypto-profiles>
        </ike>
        <qos>
          <profile>
            <entry name="default">
              <class-bandwidth-type>
                <mbps>
                  <class>
                    <entry name="class1">
                      <priority>real-time</priority>
                    </entry>
                    <entry name="class2">
                      <priority>high</priority>
                    </entry>
                    <entry name="class3">
                      <priority>high</priority>
                    </entry>
                    <entry name="class4">
                      <priority>medium</priority>
                    </entry>
                    <entry name="class5">
                      <priority>medium</priority>
                    </entry>
                    <entry name="class6">
                      <priority>low</priority>
                    </entry>
                    <entry name="class7">
                      <priority>low</priority>
                    </entry>
                    <entry name="class8">
                      <priority>low</priority>
                    </entry>
                  </class>
                </mbps>
              </class-bandwidth-type>
            </entry>
          </profile>
        </qos>
        <logical-router>
          <entry name="public">
            <vrf>
              <entry name="default">
                <multicast>
                  <pim>
                    <ssm-address-space>
                      <group-list>None</group-list>
                    </ssm-address-space>
                    <rpf-lookup-mode>mrib-then-urib</rpf-lookup-mode>
                    <route-ageout-time>210</route-ageout-time>
                    <enable>yes</enable>
                  </pim>
                  <igmp>
                    <enable>yes</enable>
                  </igmp>
                  <msdp>
                    <enable>no</enable>
                  </msdp>
                  <enable>no</enable>
                </multicast>
                <ecmp>
                  <symmetric-return>no</symmetric-return>
                  <strict-source-path>no</strict-source-path>
                  <enable>no</enable>
                  <max-path>2</max-path>
                </ecmp>
                <bgp>
                  <med>
                    <always-compare-med>no</always-compare-med>
                    <deterministic-med-comparison>yes</deterministic-med-comparison>
                  </med>
                  <graceful-restart>
                    <stale-route-time>120</stale-route-time>
                    <max-peer-restart-time>120</max-peer-restart-time>
                    <enable>yes</enable>
                    <local-restart-time>120</local-restart-time>
                  </graceful-restart>
                  <global-bfd>
                    <profile>None</profile>
                  </global-bfd>
                  <install-route>no</install-route>
                  <ecmp-multi-as>no</ecmp-multi-as>
                  <enforce-first-as>yes</enforce-first-as>
                  <fast-external-failover>yes</fast-external-failover>
                  <enable>no</enable>
                  <default-local-preference>100</default-local-preference>
                  <graceful-shutdown>no</graceful-shutdown>
                  <always-advertise-network-route>yes</always-advertise-network-route>
                </bgp>
                <routing-table>
                  <ip>
                    <static-route>
                      <entry name="internet">
                        <bfd>
                          <profile>None</profile>
                        </bfd>
                        <nexthop>
                          <ip-address>${public_azure_router_ip}</ip-address>
                        </nexthop>
                        <interface>ethernet1/1</interface>
                        <destination>0.0.0.0/0</destination>
                        <metric>10</metric>
                      </entry>
                      <entry name="intranet">
                        <bfd>
                          <profile>None</profile>
                        </bfd>
                        <nexthop>
                          <next-lr>private</next-lr>
                        </nexthop>
                        <destination>${private_network_cidr}</destination>
                        <metric>10</metric>
                      </entry>
                      <entry name="lb_health_check">
                        <bfd>
                          <profile>None</profile>
                        </bfd>
                        <nexthop>
                          <ip-address>${public_azure_router_ip}</ip-address>
                        </nexthop>
                        <interface>ethernet1/1</interface>
                        <destination>168.63.129.16/32</destination>
                        <metric>10</metric>
                      </entry>
                    </static-route>
                  </ip>
                </routing-table>
                <ospfv3>
                  <global-bfd>
                    <profile>None</profile>
                  </global-bfd>
                  <graceful-restart>
                    <enable>yes</enable>
                    <grace-period>120</grace-period>
                    <helper-enable>yes</helper-enable>
                    <strict-LSA-checking>yes</strict-LSA-checking>
                    <max-neighbor-restart-time>140</max-neighbor-restart-time>
                  </graceful-restart>
                  <enable>no</enable>
                  <disable-transit-traffic>no</disable-transit-traffic>
                </ospfv3>
                <rip>
                  <global-bfd>
                    <profile>None</profile>
                  </global-bfd>
                  <default-information-originate>no</default-information-originate>
                  <enable>no</enable>
                </rip>
                <ospf>
                  <global-bfd>
                    <profile>None</profile>
                  </global-bfd>
                  <graceful-restart>
                    <enable>yes</enable>
                    <grace-period>120</grace-period>
                    <helper-enable>yes</helper-enable>
                    <strict-LSA-checking>yes</strict-LSA-checking>
                    <max-neighbor-restart-time>140</max-neighbor-restart-time>
                  </graceful-restart>
                  <enable>no</enable>
                  <rfc1583>no</rfc1583>
                </ospf>
                <admin-dists>
                  <ospf-intra>110</ospf-intra>
                  <ospf-inter>110</ospf-inter>
                  <ospf-ext>110</ospf-ext>
                  <ospfv3-intra>110</ospfv3-intra>
                  <ospfv3-inter>110</ospfv3-inter>
                  <ospfv3-ext>110</ospfv3-ext>
                  <bgp-internal>200</bgp-internal>
                  <bgp-external>20</bgp-external>
                  <bgp-local>20</bgp-local>
                  <rip>120</rip>
                  <static>10</static>
                  <static-ipv6>10</static-ipv6>
                </admin-dists>
                <interface>
                  <member>ethernet1/1</member>
                </interface>
              </entry>
            </vrf>
          </entry>
          <entry name="private">
            <vrf>
              <entry name="default">
                <multicast>
                  <pim>
                    <ssm-address-space>
                      <group-list>None</group-list>
                    </ssm-address-space>
                    <rpf-lookup-mode>mrib-then-urib</rpf-lookup-mode>
                    <route-ageout-time>210</route-ageout-time>
                    <enable>yes</enable>
                  </pim>
                  <igmp>
                    <enable>yes</enable>
                  </igmp>
                  <msdp>
                    <enable>no</enable>
                  </msdp>
                  <enable>no</enable>
                </multicast>
                <ecmp>
                  <symmetric-return>no</symmetric-return>
                  <strict-source-path>no</strict-source-path>
                  <enable>no</enable>
                  <max-path>2</max-path>
                </ecmp>
                <bgp>
                  <med>
                    <always-compare-med>no</always-compare-med>
                    <deterministic-med-comparison>yes</deterministic-med-comparison>
                  </med>
                  <graceful-restart>
                    <stale-route-time>120</stale-route-time>
                    <max-peer-restart-time>120</max-peer-restart-time>
                    <enable>yes</enable>
                    <local-restart-time>120</local-restart-time>
                  </graceful-restart>
                  <global-bfd>
                    <profile>None</profile>
                  </global-bfd>
                  <install-route>no</install-route>
                  <ecmp-multi-as>no</ecmp-multi-as>
                  <enforce-first-as>yes</enforce-first-as>
                  <fast-external-failover>yes</fast-external-failover>
                  <enable>no</enable>
                  <default-local-preference>100</default-local-preference>
                  <graceful-shutdown>no</graceful-shutdown>
                  <always-advertise-network-route>yes</always-advertise-network-route>
                </bgp>
                <routing-table>
                  <ip>
                    <static-route>
                      <entry name="lb_health_check">
                        <bfd>
                          <profile>None</profile>
                        </bfd>
                        <nexthop>
                          <ip-address>${private_azure_router_ip}</ip-address>
                        </nexthop>
                        <interface>ethernet1/2</interface>
                        <destination>168.63.129.16/32</destination>
                        <metric>10</metric>
                      </entry>
                      <entry name="intranet">
                        <bfd>
                          <profile>None</profile>
                        </bfd>
                        <nexthop>
                          <ip-address>${private_azure_router_ip}</ip-address>
                        </nexthop>
                        <interface>ethernet1/2</interface>
                        <destination>${private_network_cidr}</destination>
                        <metric>10</metric>
                      </entry>
                      <entry name="internet">
                        <bfd>
                          <profile>None</profile>
                        </bfd>
                        <nexthop>
                          <next-lr>public</next-lr>
                        </nexthop>
                        <destination>0.0.0.0/0</destination>
                        <metric>10</metric>
                      </entry>
                    </static-route>
                  </ip>
                </routing-table>
                <ospfv3>
                  <global-bfd>
                    <profile>None</profile>
                  </global-bfd>
                  <graceful-restart>
                    <enable>yes</enable>
                    <grace-period>120</grace-period>
                    <helper-enable>yes</helper-enable>
                    <strict-LSA-checking>yes</strict-LSA-checking>
                    <max-neighbor-restart-time>140</max-neighbor-restart-time>
                  </graceful-restart>
                  <enable>no</enable>
                  <disable-transit-traffic>no</disable-transit-traffic>
                </ospfv3>
                <rip>
                  <global-bfd>
                    <profile>None</profile>
                  </global-bfd>
                  <default-information-originate>no</default-information-originate>
                  <enable>no</enable>
                </rip>
                <ospf>
                  <global-bfd>
                    <profile>None</profile>
                  </global-bfd>
                  <graceful-restart>
                    <enable>yes</enable>
                    <grace-period>120</grace-period>
                    <helper-enable>yes</helper-enable>
                    <strict-LSA-checking>yes</strict-LSA-checking>
                    <max-neighbor-restart-time>140</max-neighbor-restart-time>
                  </graceful-restart>
                  <enable>no</enable>
                  <rfc1583>no</rfc1583>
                </ospf>
                <admin-dists>
                  <ospf-intra>110</ospf-intra>
                  <ospf-inter>110</ospf-inter>
                  <ospf-ext>110</ospf-ext>
                  <ospfv3-intra>110</ospfv3-intra>
                  <ospfv3-inter>110</ospfv3-inter>
                  <ospfv3-ext>110</ospfv3-ext>
                  <bgp-internal>200</bgp-internal>
                  <bgp-external>20</bgp-external>
                  <bgp-local>20</bgp-local>
                  <rip>120</rip>
                  <static>10</static>
                  <static-ipv6>10</static-ipv6>
                </admin-dists>
                <interface>
                  <member>ethernet1/2</member>
                </interface>
              </entry>
            </vrf>
          </entry>
        </logical-router>
      </network>
      <deviceconfig>
        <system>
          <type>
            <dhcp-client>
              <send-hostname>yes</send-hostname>
              <send-client-id>no</send-client-id>
              <accept-dhcp-hostname>no</accept-dhcp-hostname>
              <accept-dhcp-domain>no</accept-dhcp-domain>
            </dhcp-client>
          </type>
          <update-server>updates.paloaltonetworks.com</update-server>
          <update-schedule>
            <threats>
              <recurring>
                <weekly>
                  <day-of-week>wednesday</day-of-week>
                  <at>01:02</at>
                  <action>download-only</action>
                </weekly>
              </recurring>
            </threats>
          </update-schedule>
          <timezone>US/Pacific</timezone>
          <service>
            <disable-telnet>yes</disable-telnet>
            <disable-http>yes</disable-http>
          </service>
          <ntp-servers>
            <primary-ntp-server>
              <ntp-server-address>0.us.pool.ntp.org</ntp-server-address>
              <authentication-type>
                <none/>
              </authentication-type>
            </primary-ntp-server>
            <secondary-ntp-server>
              <ntp-server-address>1.us.pool.ntp.org</ntp-server-address>
              <authentication-type>
                <none/>
              </authentication-type>
            </secondary-ntp-server>
          </ntp-servers>
        </system>
        <setting>
          <config>
            <rematch>yes</rematch>
          </config>
          <management>
            <hostname-type-in-syslog>FQDN</hostname-type-in-syslog>
            <initcfg>
              <username>panadmin</username>
              <type>
                <dhcp-client>
                  <send-hostname>yes</send-hostname>
                  <send-client-id>no</send-client-id>
                  <accept-dhcp-hostname>no</accept-dhcp-hostname>
                  <accept-dhcp-domain>no</accept-dhcp-domain>
                </dhcp-client>
              </type>
            </initcfg>
          </management>
          <advance-routing>yes</advance-routing>
        </setting>
%{ if ai_instr_key != null ~}
        <plugins>
          <vm_series version="2.0.3">
            <azure-advanced-metrics>
              <enable>yes</enable>
              <instrumentation-key>${ai_instr_key}</instrumentation-key>
              <update-interval>${ai_update_interval}</update-interval>
            </azure-advanced-metrics>
          </vm_series>
        </plugins>
%{ endif ~}
      </deviceconfig>
      <vsys>
        <entry name="vsys1">
          <application/>
          <application-group/>
          <zone>
            <entry name="public">
              <network>
                <layer3>
                  <member>ethernet1/1</member>
                </layer3>
              </network>
            </entry>
            <entry name="private">
              <network>
                <layer3>
                  <member>ethernet1/2</member>
                </layer3>
              </network>
            </entry>
          </zone>
          <service/>
          <service-group/>
          <schedule/>
          <rulebase>
            <security>
              <rules>
                <entry name="any-any" uuid="77aedfa1-6f62-4bdd-99fe-425bac278c22">
                  <to>
                    <member>any</member>
                  </to>
                  <from>
                    <member>any</member>
                  </from>
                  <source>
                    <member>any</member>
                  </source>
                  <destination>
                    <member>any</member>
                  </destination>
                  <source-user>
                    <member>any</member>
                  </source-user>
                  <category>
                    <member>any</member>
                  </category>
                  <application>
                    <member>any</member>
                  </application>
                  <service>
                    <member>any</member>
                  </service>
                  <source-hip>
                    <member>any</member>
                  </source-hip>
                  <destination-hip>
                    <member>any</member>
                  </destination-hip>
                  <action>allow</action>
                </entry>
              </rules>
            </security>
            <nat>
              <rules>
                <entry name="internet" uuid="d62025ef-b176-428c-a807-2ef427b175cd">
                  <source-translation>
                    <dynamic-ip-and-port>
                      <interface-address>
                        <interface>ethernet1/1</interface>
                      </interface-address>
                    </dynamic-ip-and-port>
                  </source-translation>
                  <to>
                    <member>public</member>
                  </to>
                  <from>
                    <member>private</member>
                  </from>
                  <source>
                    <member>${private_network_cidr}</member>
                  </source>
                  <destination>
                    <member>any</member>
                  </destination>
                  <service>any</service>
                  <to-interface>any</to-interface>
                  <disabled>no</disabled>
                </entry>
              </rules>
            </nat>
          </rulebase>
          <import>
            <network>
              <interface>
                <member>ethernet1/1</member>
                <member>ethernet1/2</member>
              </interface>
            </network>
          </import>
        </entry>
      </vsys>
    </entry>
  </devices>
</config>
