# Palo Alto Networks vWAN Module for Azure

A Terraform module for deploying a Virtual WAN (vWAN) and its components required for the firewalls in Azure.

## Usage

This module is designed to work in several *modes* depending on which variables or flags are set. Most common usage scenarios are:

- create all - creates a vWAN, vHub, Connections and Route Tables. In this mode, a vWAN and vHub are created. The Connections and Route Tables are assigned to the vHub:

  ```hcl
  name = "virtual_wan"
  virtual_hubs = {
    "vhub" = {
      name           = "virtual_hub"
      address_prefix = "10.0.0.0/24"
    }
  }
  connections = {
    "app1-to-vhub" = {
      name                       = "app1-to-vhub"
      connection_type            = "Vnet"
      virtual_hub_key            = "vhub"
      remote_virtual_network_key = "app1"
    }
  }
  route_tables = {
    "default" = {
      name            = "default-rt"
      virtual_hub_key = "vhub"
      labels          = ["default-rt"]
    }
  }
  ```

- sources a vWAN and vHub but creates Connections and Route Tables:

  ```hcl
  create_virtual_wan  = false
  name                = "virtual_wan"
  resource_group_name = "virtual_wan_rg"
  virtual_hubs = {
    "vhub" = {
      create              = false
      name                = "virtual_hub"
      resource_group_name = "virtual_wan_rg"
    }
  }
  connections = {
    "app1-to-vhub" = {
      name                       = "app1-to-vhub"
      connection_type            = "Vnet"
      virtual_hub_key            = "vhub"
      remote_virtual_network_key = "app1"
    }
  }
  route_tables = {
    "default" = {
      name            = "default-rt"
      virtual_hub_key = "vhub"
      labels          = ["default-rt"]
    }
  }
  ```
